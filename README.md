# üõçÔ∏è –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Ç–æ–≤–∞—Ä–æ–≤

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –Ω–∞ FastAPI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∫–ª–∏–∫–∏, –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É, –ø–æ–∫—É–ø–∫–∏).

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ä–µ—à–µ–Ω–∏—è)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [API Endpoints](#-api-endpoints)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ê–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π](#-–∞–ª–≥–æ—Ä–∏—Ç–º—ã-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π)
- [–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è](#-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
- [–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ](#-–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **Collaborative Filtering** —á–µ—Ä–µ–∑ co-occurrence –º–∞—Ç—Ä–∏—Ü—É (—Ç–æ–≤–∞—Ä—ã —á–∞—Å—Ç–æ –ø–æ–∫—É–ø–∞–µ–º—ã–µ –≤–º–µ—Å—Ç–µ)
- ‚úÖ **Fallback –º–µ—Ö–∞–Ω–∏–∑–º** ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è —Ö–æ–ª–æ–¥–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
- ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ KeyDB –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã
- ‚úÖ **REST API** —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π Swagger
- ‚úÖ **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** –¥–ª—è –ª—ë–≥–∫–æ–≥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è
- ‚úÖ **Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –ü–æ—á–µ–º—É –≤—ã–±—Ä–∞–Ω–∞ –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞?

#### 1Ô∏è‚É£ **Co-occurrence –º–∞—Ç—Ä–∏—Ü–∞ (Collaborative Filtering)**

**–í—ã–±–æ—Ä:** –¢–æ–≤–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —á–∞—Å—Ç–æ –ø–æ–∫—É–ø–∞—é—Ç –≤–º–µ—Å—Ç–µ, –≤–µ—Ä–æ—è—Ç–Ω–æ, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã –¥—Ä—É–≥ –¥—Ä—É–≥—É.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç ML –º–æ–¥–µ–ª–µ–π –∏ –æ–±—É—á–µ–Ω–∏—è
- –†–∞–±–æ—Ç–∞–µ—Ç "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" –±–µ–∑ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- –ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (O(1) –¥–æ—Å—Ç—É–ø –∫ –º–∞—Ç—Ä–∏—Ü–µ)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫—É–ø–∏–ª [A, B, C]
–î—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–∫—É–ø–∞–ª–∏:
  A + D (15 —Ä–∞–∑)
  B + E (12 —Ä–∞–∑)
  C + F (10 —Ä–∞–∑)

‚Üí –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º: [D, E, F]
```

#### 2Ô∏è‚É£ **–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π popularity score**

**–í—ã–±–æ—Ä:** –í–∑–≤–µ—à–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞–º–∏.

**–§–æ—Ä–º—É–ª–∞:**
```python
score = (clicks / max_clicks) * coef_click +
        (cart / max_cart) * coef_cart +
        (purchases / max_purchases) * coef_purchase

–≥–¥–µ:
  coef_click = purchases_total / clicks_total
  coef_cart = purchases_total / cart_total
  coef_purchase = 1
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º (0-1 –¥–∏–∞–ø–∞–∑–æ–Ω)
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ü–æ–∫—É–ø–∫–∏ –≤–µ—Å—è—Ç –±–æ–ª—å—à–µ —á–µ–º –∫–ª–∏–∫–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

#### 3Ô∏è‚É£ **KeyDB –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è**

**–í—ã–±–æ—Ä:** In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

**–ß—Ç–æ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è:**
- `cooccurrence_full` ‚Äî –º–∞—Ç—Ä–∏—Ü–∞ –ø–æ—Ö–æ–∂–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ (~2271 –∑–∞–ø–∏—Å–µ–π)
- `product_brands` ‚Äî —Å–ª–æ–≤–∞—Ä—å pid ‚Üí brand (~2346 –∑–∞–ø–∏—Å–µ–π)
- `popular_products` ‚Äî —Ç–æ–ø-100 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚ö° –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ ~10 —Ä–∞–∑
- üíæ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ CSV –ø–∞—Ä—Å–∏–Ω–≥
- üîÑ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏

#### 4Ô∏è‚É£ **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞**

```
recommendation_engine.py  ‚Üí –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
cache.py                  ‚Üí –°–ª–æ–π –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω)
main.py                   ‚Üí API endpoint'—ã (FastAPI)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SRP)
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –æ—Ç–¥–µ–ª—å–Ω–æ
- –ú–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å KeyDB –Ω–∞ Redis/Memcached –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repo-url>
cd rec

# 2. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ data.csv –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
ls data.csv

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose up -d

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose ps

# 5. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
http://localhost:8000
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:**
```bash
docker-compose logs -f app
```

**–û—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
docker-compose down
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Python 3.11+
- pip

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
# 1. –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv

# 2. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å
python main.py
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://localhost:8000`

---

## üì° API Endpoints

### üè† –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (HTML —Ñ–æ—Ä–º–∞)
```
GET /
```
–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.

---

### üéÅ –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
```
GET /recommendations?user_id=<uid>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `user_id` (int, required) ‚Äî ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl "http://localhost:8000/recommendations?user_id=123"
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "uid": 123,
  "products": [45, 67, 89, 102, 115]
}
```

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Üí –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (co-occurrence)
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–æ–≤—ã–π ‚Üí —Ç–æ–ø-5 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

---

### üíö Health Check
```
GET /health
```

**–û—Ç–≤–µ—Ç (OK):**
```json
{
  "status": "healthy",
  "message": "API —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ"
}
```

**–û—Ç–≤–µ—Ç (Error):**
```json
{
  "status": "unhealthy",
  "message": "–î–≤–∏–∂–æ–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω..."
}
```

---

### üìö Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```
GET /docs
```

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

---

### üìñ ReDoc –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```
GET /redoc
```

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ —Å—Ç–∏–ª–µ ReDoc.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
rec/
‚îú‚îÄ‚îÄ main.py                      # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (API endpoints)
‚îú‚îÄ‚îÄ recommendation_engine.py     # –û—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
‚îú‚îÄ‚îÄ cache.py                     # –ú–µ–Ω–µ–¥–∂–µ—Ä –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (KeyDB)
‚îú‚îÄ‚îÄ data.csv                     # CSV –¥–∞–Ω–Ω—ã–µ (uid, pid, brand, click, add_to_cart, purchase)
‚îú‚îÄ‚îÄ requirements.txt             # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Dockerfile                   # Docker –æ–±—Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml           # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è (app + KeyDB)
‚îú‚îÄ‚îÄ .dockerignore               # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Docker
‚îú‚îÄ‚îÄ .gitignore                  # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Git
‚îî‚îÄ‚îÄ README.md                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
```

---

## üßÆ –ê–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

### –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–®–∞–≥ 1:** –°–æ–±—Ä–∞—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞–ª
```python
interested_products = {—Ç–æ–≤–∞—Ä—ã –≥–¥–µ click > 0 –∏–ª–∏ cart > 0 –∏–ª–∏ purchase > 0}
```

**–®–∞–≥ 2:** –ù–∞–π—Ç–∏ –ø–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã —á–µ—Ä–µ–∑ co-occurrence
```python
for –∫–∞–∂–¥–æ–≥–æ seed_pid in interested_products:
    for –∫–∞–∂–¥–æ–≥–æ similar_pid in cooccurrence[seed_pid]:
        if similar_pid –Ω–µ –≤ interested_products:
            candidate_counts[similar_pid] += 1
```

**–®–∞–≥ 3:** –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —á–∞—Å—Ç–æ—Ç–µ –≤—Å—Ç—Ä–µ—á–∞–µ–º–æ—Å—Ç–∏
```python
ranked = sorted(candidates, key=frequency, reverse=True)
recommendations = top_5(ranked)
```

**–®–∞–≥ 4:** Fallback ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏
```python
if len(recommendations) < 5:
    add popular_products –¥–æ 5 —à—Ç—É–∫
```

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ `(pid, brand)`
- ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ —É–∂–µ –≤–∏–¥–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

---

### –î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ö–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç)

**–ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞:**
```python
return top_5_popular_products
```

–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ `popularity_score` (—Å–º. —Ñ–æ—Ä–º—É–ª—É –≤—ã—à–µ).

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**

**–ü—Ä–æ–±–ª–µ–º–∞:** CSV —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç—å —Ü–µ–ª–∏–∫–æ–º.

**–õ–∏–º–∏—Ç:** ~1-10 –º–ª–Ω –∑–∞–ø–∏—Å–µ–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç RAM)

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è production:**
- –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL/ClickHouse
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å batch processing –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤

---

### 2. **–•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç**

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏.

**–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ:** –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã (fallback)

**–£–ª—É—á—à–µ–Ω–∏–µ:**
- Content-based filtering (–ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –∞—Ç—Ä–∏–±—É—Ç–∞–º)
- –î–µ–º–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (–≤–æ–∑—Ä–∞—Å—Ç, –ø–æ–ª, —Ä–µ–≥–∏–æ–Ω)
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

---

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç–∏—á–Ω—ã, –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

**–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–£–ª—É—á—à–µ–Ω–∏–µ:**
- Streaming –æ–±—Ä–∞–±–æ—Ç–∫–∞ (Kafka + Spark Streaming)
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ co-occurrence
- Scheduled jobs –¥–ª—è –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏

---

### 4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π**

**–ü—Ä–æ–±–ª–µ–º–∞:** –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å—Ç—Ä–æ—è—Ç—Å—è –Ω–∞ **–≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è**, –±–µ–∑ —É—á–µ—Ç–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏.

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- ‚ùå –ù–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚ùå –°—Ç–∞—Ä—ã–µ –ø–æ–∫—É–ø–∫–∏ (–≥–æ–¥ –Ω–∞–∑–∞–¥) –∏–º–µ—é—Ç —Ç–æ—Ç –∂–µ –≤–µ—Å, —á—Ç–æ –∏ –Ω–µ–¥–∞–≤–Ω–∏–µ (–≤—á–µ—Ä–∞)
- ‚ùå –¢—Ä–µ–Ω–¥—ã –∏ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è
- ‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫—É–ø–∞–ª:
  2023: –î–µ—Ç—Å–∫–∏–µ —Ç–æ–≤–∞—Ä—ã (–±—ã–ª —Ä–µ–±–µ–Ω–æ–∫)
  2026: –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ (—Ä–µ–±–µ–Ω–æ–∫ –≤—ã—Ä–æ—Å)

‚Üí –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç: –î–µ—Ç—Å–∫–∏–µ —Ç–æ–≤–∞—Ä—ã + –¢—É—Ä–∏–∑–º (–º–∏–∫—Å –≤—Å–µ–≥–æ)
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω—ã–π —Å—Ç–∞—Ä—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–æ–ª—å—à–æ–π CSV —Ñ–∞–π–ª + –Ω–µ—Ç –∫—ç—à–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –ø–æ–¥–æ–∂–¥–∏—Ç–µ ~30 —Å–µ–∫—É–Ω–¥
2. –°–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏ –±—É–¥—É—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–º–∏ (–∫—ç—à)

---

## üìö –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Python 3.11** ‚Äî —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **FastAPI** ‚Äî web framework
- **Pandas** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **Redis (KeyDB)** ‚Äî in-memory –∫—ç—à
- **Docker** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Uvicorn** ‚Äî ASGI —Å–µ—Ä–≤–µ—Ä

